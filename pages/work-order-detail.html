<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>工单详情</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@2.8.2/dist/alpine.js" defer></script>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-8">
        <!-- 工单基本信息 -->
        <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
            <div class="flex items-start justify-between">
                <div class="space-y-4">
                    <div class="flex items-center space-x-4">
                        <h1 class="text-2xl font-bold text-gray-900">WO-20240321001</h1>
                        <span class="text-lg text-gray-500">关联风险ID: RISK-001</span>
                    </div>
                    <div class="flex items-center space-x-6">
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500">工单状态：</span>
                            <span class="px-2 py-1 text-sm rounded-full bg-yellow-100 text-yellow-800">处理中</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500">优先级：</span>
                            <span class="px-2 py-1 text-sm rounded-full bg-red-100 text-red-800">重要紧急</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500">接收方：</span>
                            <span class="text-sm text-gray-900">斗象安全</span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-6 text-sm text-gray-500">
                        <div>创建时间：2024-03-21 10:30:00</div>
                        <div>更新时间：2024-03-21 15:45:00</div>
                        <div class="text-red-600">
                            <i class="fas fa-clock mr-1"></i>
                            距离截止还剩：23小时30分钟
                        </div>
                    </div>
                </div>
                <div class="flex space-x-2">
                    <button class="px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200">
                        <i class="fas fa-share-alt mr-1"></i>重新派发
                    </button>
                    <button class="px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200">
                        <i class="fas fa-times-circle mr-1"></i>强制关闭
                    </button>
                    <button class="px-4 py-2 text-sm text-gray-600 hover:bg-gray-50 rounded-lg transition-colors duration-200">
                        <i class="fas fa-file-export mr-1"></i>导出报告
                    </button>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-12 gap-6">
            <!-- 处理步骤时间线 -->
            <div class="col-span-3">
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-lg font-medium text-gray-900 mb-6">处理步骤</h2>
                    <div class="relative">
                        <div class="absolute top-0 bottom-0 left-4 w-0.5 bg-gray-200"></div>
                        <div class="space-y-8">
                            <div class="relative">
                                <div class="absolute left-0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check text-white"></i>
                                </div>
                                <div class="ml-12">
                                    <div class="text-sm font-medium text-gray-900">工单创建</div>
                                    <div class="text-xs text-gray-500">2024-03-21 10:30:00</div>
                                    <div class="text-sm text-gray-600 mt-1">系统自动创建工单</div>
                                </div>
                            </div>
                            <div class="relative">
                                <div class="absolute left-0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-user text-white"></i>
                                </div>
                                <div class="ml-12">
                                    <div class="text-sm font-medium text-gray-900">分配处理人</div>
                                    <div class="text-xs text-gray-500">2024-03-21 10:35:00</div>
                                    <div class="text-sm text-gray-600 mt-1">
                                        分配给：张三（斗象安全）
                                        <div class="text-xs text-gray-500">联系方式：13800138000</div>
                                    </div>
                                </div>
                            </div>
                            <div class="relative">
                                <div class="absolute left-0 w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center">
                                    <i class="fas fa-spinner text-white"></i>
                                </div>
                                <div class="ml-12">
                                    <div class="text-sm font-medium text-gray-900">处理中</div>
                                    <div class="text-xs text-gray-500">2024-03-21 11:00:00</div>
                                    <div class="text-sm text-gray-600 mt-1">开始处理工单</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 工单详情内容 -->
            <div class="col-span-9 space-y-6">
                <!-- 风险描述 -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-lg font-medium text-gray-900 mb-4">风险描述</h2>
                    <div class="prose max-w-none">
                        <p class="text-gray-600">发现疑似SQL注入漏洞，该漏洞可能导致未经授权的数据库访问。具体表现为：</p>
                        <ul class="list-disc list-inside text-gray-600 mt-2">
                            <li>在登录接口发现可以通过特殊字符绕过验证</li>
                            <li>数据库错误信息直接暴露在响应中</li>
                            <li>未对用户输入进行有效过滤</li>
                        </ul>
                        <p class="text-gray-600 mt-2">影响范围：</p>
                        <ul class="list-disc list-inside text-gray-600 mt-2">
                            <li>用户认证系统</li>
                            <li>订单管理模块</li>
                        </ul>
                    </div>
                </div>

                <!-- 研判结论 -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-lg font-medium text-gray-900 mb-4">研判结论</h2>
                    <div class="prose max-w-none">
                        <p class="text-gray-600">经过详细分析，确认存在SQL注入漏洞，风险等级：高危。主要发现：</p>
                        <ul class="list-disc list-inside text-gray-600 mt-2">
                            <li>成功构造Payload获取数据库版本信息</li>
                            <li>可以通过Union注入获取敏感数据</li>
                            <li>数据库用户权限配置不当</li>
                        </ul>
                        <p class="text-gray-600 mt-4">建议修复方案：</p>
                        <ul class="list-disc list-inside text-gray-600 mt-2">
                            <li>使用参数化查询替代字符串拼接</li>
                            <li>增加输入验证和过滤</li>
                            <li>配置Web应用防火墙</li>
                            <li>最小化数据库用户权限</li>
                        </ul>
                    </div>
                </div>

                <!-- 证据附件 -->
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-medium text-gray-900">证据附件</h2>
                        <button class="px-3 py-1.5 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200">
                            <i class="fas fa-upload mr-1"></i>上传附件
                        </button>
                    </div>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                            <div class="flex items-center space-x-4">
                                <i class="fas fa-file-pdf text-red-500 text-2xl"></i>
                                <div>
                                    <div class="text-sm font-medium text-gray-900">漏洞复现报告.pdf</div>
                                    <div class="text-xs text-gray-500">2.5MB · 2024-03-21 11:30:00</div>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button class="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-50 rounded-lg transition-colors duration-200">
                                    <i class="fas fa-eye mr-1"></i>预览
                                </button>
                                <button class="px-3 py-1.5 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200">
                                    <i class="fas fa-download mr-1"></i>下载
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                            <div class="flex items-center space-x-4">
                                <i class="fas fa-file-image text-green-500 text-2xl"></i>
                                <div>
                                    <div class="text-sm font-medium text-gray-900">漏洞截图.png</div>
                                    <div class="text-xs text-gray-500">1.2MB · 2024-03-21 11:35:00</div>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button class="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-50 rounded-lg transition-colors duration-200">
                                    <i class="fas fa-eye mr-1"></i>预览
                                </button>
                                <button class="px-3 py-1.5 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200">
                                    <i class="fas fa-download mr-1"></i>下载
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 重新派发对话框 -->
    <div x-data="{ open: false }" x-show="open" class="fixed inset-0 z-50 overflow-y-auto" style="display: none;">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">重新派发工单</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">选择接收方</label>
                            <select class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                <option>斗象安全</option>
                                <option>观安信息</option>
                                <option>其他单位</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">处理人</label>
                            <select class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                <option>张三</option>
                                <option>李四</option>
                                <option>王五</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">备注说明</label>
                            <textarea class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" rows="3" placeholder="请输入重新派发的原因..."></textarea>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm">
                        确认派发
                    </button>
                    <button type="button" @click="open = false" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        取消
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 强制关闭对话框 -->
    <div x-data="{ open: false }" x-show="open" class="fixed inset-0 z-50 overflow-y-auto" style="display: none;">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">强制关闭工单</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">关闭原因</label>
                            <select class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                <option>误报</option>
                                <option>重复工单</option>
                                <option>其他原因</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">备注说明</label>
                            <textarea class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" rows="3" placeholder="请输入关闭工单的具体原因..."></textarea>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm">
                        确认关闭
                    </button>
                    <button type="button" @click="open = false" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        取消
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 