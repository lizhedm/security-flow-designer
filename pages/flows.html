<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>流程管理</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-white p-6">
    <!-- 搜索和筛选区 -->
    <div class="mb-6 flex items-center justify-between">
        <div class="flex items-center space-x-4">
            <div class="relative">
                <input type="text" placeholder="搜索流程..." class="pl-10 pr-4 py-2 border rounded-lg w-64">
                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
            </div>
            <select class="border rounded-lg px-4 py-2">
                <option>全部分类</option>
                <option>威胁分析</option>
                <option>工作考核</option>
                <option>应急响应</option>
            </select>
            <select class="border rounded-lg px-4 py-2">
                <option>全部状态</option>
                <option>已发布</option>
                <option>草稿</option>
            </select>
        </div>
        <button onclick="showNewFlowModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
            <i class="fas fa-plus mr-2"></i>新建流程
        </button>
    </div>

    <!-- 流程卡片网格 -->
    <div class="grid grid-cols-3 gap-6">
        <!-- 漏洞验证流程卡片 -->
        <div class="bg-white rounded-lg border p-4 hover:shadow-lg transition-shadow">
            <div class="flex items-start justify-between mb-4">
                <div>
                    <h3 class="text-lg font-medium">漏洞验证流程</h3>
                    <p class="text-sm text-gray-500 mt-1">版本 2.1</p>
                </div>
                <div class="flex space-x-2">
                    <button onclick="goToEditor('漏洞验证流程')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-copy"></i>
                    </button>
                    <button class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            <div class="flex items-center space-x-2 mb-4">
                <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs">威胁分析</span>
                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">已发布</span>
            </div>
            <p class="text-sm text-gray-600 mb-4">用于自动化验证漏洞是否存在，并生成相应的工单。</p>
            <div class="flex items-center justify-between text-sm text-gray-500">
                <span>最近修改：2024-03-20</span>
            </div>
        </div>

        <!-- DDOS应急响应卡片 -->
        <div class="bg-white rounded-lg border p-4 hover:shadow-lg transition-shadow">
            <div class="flex items-start justify-between mb-4">
                <div>
                    <h3 class="text-lg font-medium">DDOS应急响应</h3>
                    <p class="text-sm text-gray-500 mt-1">版本 1.5</p>
                </div>
                <div class="flex space-x-2">
                    <button onclick="goToEditor('DDOS应急响应')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-copy"></i>
                    </button>
                    <button class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            <div class="flex items-center space-x-2 mb-4">
                <span class="px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs">应急响应</span>
                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">已发布</span>
            </div>
            <p class="text-sm text-gray-600 mb-4">DDOS攻击快速响应与防护流程，包含检测、分析与防护措施。</p>
            <div class="flex items-center justify-between text-sm text-gray-500">
                <span>最近修改：2024-03-18</span>
            </div>
        </div>

        <!-- 资产扫描流程卡片 -->
        <div class="bg-white rounded-lg border p-4 hover:shadow-lg transition-shadow">
            <div class="flex items-start justify-between mb-4">
                <div>
                    <h3 class="text-lg font-medium">资产扫描流程</h3>
                    <p class="text-sm text-gray-500 mt-1">版本 1.0</p>
                </div>
                <div class="flex space-x-2">
                    <button onclick="goToEditor('资产扫描流程')" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-copy"></i>
                    </button>
                    <button class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
            <div class="flex items-center space-x-2 mb-4">
                <span class="px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs">资产管理</span>
                <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs">草稿</span>
            </div>
            <p class="text-sm text-gray-600 mb-4">定期扫描资产并更新资产库，自动化资产风险评估。</p>
            <div class="flex items-center justify-between text-sm text-gray-500">
                <span>最近修改：2024-03-15</span>
            </div>
        </div>
    </div>

    <!-- 新建流程弹窗 -->
    <div id="newFlowModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center">
        <div class="bg-white rounded-lg p-6 w-[500px]">
            <h2 class="text-xl font-bold mb-4">新建流程</h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">流程名称</label>
                    <input type="text" id="flowName" class="w-full border rounded-lg px-3 py-2" placeholder="请输入流程名称">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">流程类型</label>
                    <select id="flowType" class="w-full border rounded-lg px-3 py-2">
                        <option value="">请选择流程类型</option>
                        <option value="威胁分析">威胁分析</option>
                        <option value="工作考核">工作考核</option>
                        <option value="应急响应">应急响应</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">备注说明</label>
                    <textarea id="flowDescription" class="w-full border rounded-lg px-3 py-2 h-24" placeholder="请输入备注说明"></textarea>
                </div>
            </div>
            <div class="flex justify-end space-x-4 mt-6">
                <button onclick="hideNewFlowModal()" class="px-4 py-2 border rounded-lg hover:bg-gray-100">取消</button>
                <button onclick="createNewFlow()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">创建</button>
            </div>
        </div>
    </div>

    <script>
        // 显示新建流程弹窗
        function showNewFlowModal() {
            document.getElementById('newFlowModal').classList.remove('hidden');
        }

        // 隐藏新建流程弹窗
        function hideNewFlowModal() {
            document.getElementById('newFlowModal').classList.add('hidden');
        }

        // 创建新流程
        function createNewFlow() {
            const name = document.getElementById('flowName').value;
            const type = document.getElementById('flowType').value;
            const description = document.getElementById('flowDescription').value;

            if (!name || !type) {
                alert('请填写流程名称和选择流程类型');
                return;
            }

            // 跳转到编辑器页面，并传递参数
            window.location.href = `flow-editor.html?name=${encodeURIComponent(name)}&type=${encodeURIComponent(type)}&description=${encodeURIComponent(description)}`;
        }

        // 跳转到编辑器页面
        function goToEditor(flowName) {
            window.location.href = `flow-editor.html?name=${encodeURIComponent(flowName)}`;
        }
    </script>
</body>
</html> 